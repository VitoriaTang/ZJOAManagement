@model IEnumerable<ZJOASystem.Models.Employee>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@ZJOASystem.Controllers.ResourceReader.GetString("EMPLOYEE_TITLE")</h2>

<p>
    @Html.ActionLink(ZJOASystem.Controllers.ResourceReader.GetString("EMPLOYEE_CREATE"), "Create")
</p>
<form class="navbar-form navbar-right" name="searchform" action="@Url.Action("Index", new {index="1" })" method="post">
    <div class="input-group">
        <input type="text" id="searchkey" name="searchkey" class="form-control" placeholder="Search..." />
            <span class="btn input-group-addon" onclick="document.searchform.submit();">
                <span class="glyphicon  glyphicon-search"></span>
            </span>
        @Html.Hidden("hiddensearchkey", ViewData["hiddensearchkey"])
    </div>
</form>
<table class="table">
    <tr>
        <th>
            @Html.ActionLink("姓名", "Index", new { sortBy = "Name", decending = ViewData["namesortorder"], searchkey = ViewData["hiddensearchkey"] })
            @Html.Hidden("namesortorder", ViewData["namesortorder"])
        </th>
        <th>
            @Html.ActionLink("员工码", "Index", new { sortBy = "Encode", decending = ViewData["encodesortorder"] == "1", searchkey = ViewData["hiddensearchkey"] })
            @Html.Hidden("encodesortorder", ViewData["encodesortorder"])
        </th>
        <th>
            @Html.ActionLink("联系电话", "Index", new { sortBy = "Telephone", decending = ViewData["telephonesortorder"] == "1", searchkey = ViewData["hiddensearchkey"] })
            @Html.Hidden("telephonesortorder", ViewData["telephonesortorder"])
        </th>
        <th>
            @Html.ActionLink("电子邮件", "Index", new { sortBy = "Email", decending = ViewData["emailsortorder"] == "1", searchkey = ViewData["hiddensearchkey"] })
            @Html.Hidden("emailsortorder", ViewData["emailsortorder"])
        </th>
        <th>
            @ZJOASystem.Controllers.ResourceReader.GetString("DEPARTMENTLIST")
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Encode)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Telephone)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td>
            @ZJOASystem.Controllers.EmployeeController.RenderDepartmentText(item)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table>
@Html.Partial("_PagerView", ViewData["pagemodel"])
